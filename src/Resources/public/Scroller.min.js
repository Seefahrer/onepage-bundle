function Scroller(){var scrollingElement=document.scrollingElement||document.documentElement,duration=400,easing="easeInOut",offset=0,queue=[],history=[],running=!1;this.setDuration=function(newDuration){duration=checkTypeOf(newDuration,"number")},this.getDuration=function(){return duration},this.setEasing=function(newEasing){easing=checkTypeOf(newEasing,"number")},this.getEasing=function(){return easing},this.setOffset=function(newOffset){offset=checkTypeOf(newOffset,"number")},this.getOffset=function(){return offset},this.getPosition=function(){return scrollingElement.scrollTop};var setPosition=function(position){scrollingElement.scrollTop=checkTypeOf(position,"number")};this.getQueue=function(){return queue},this.abort=function(){queue=[],running=!1},this.movable=function(id){var id=decodeURI(id),anchorElement;return null!=document.getElementById(id)},this.move=function(id){id!==queue[queue.length-1]&&queue.push(id),!1===running&&this.scroll()},this.scroll=function(animationTime,to){if(!0!==running&&void 0===to){var to=getDistanceToBody(document.getElementById(queue[0]));void 0===animationTime&&(animationTime=0,this.distance=Math.abs(to-scrollingElement.scrollTop),to>=this.getPosition()?(this.offsetElement=to-this.distance,this.direction="down"):(this.offsetElement=this.getPosition(),this.direction="up")),running=!0}if(!0===running){switch(easing){case"linear":var t=linear(animationTime/duration);break;case"easeIn":var t=easeIn(animationTime/duration);break;case"easeOut":var t=easeOut(animationTime/duration);break;case"easeInOut":var t=easeInOut(animationTime/duration);break;default:var t=linear(animationTime/duration)}var scrollUnit=this.distance/1*t;"down"===this.direction?setPosition(this.offsetElement+scrollUnit):"up"===this.direction&&setPosition(this.offsetElement-scrollUnit),setTimeout(function(self){if(animationTime>=duration)return running=!1,history.unshift(queue.shift()),void(queue.length>0&&self.scroll());self.scroll(animationTime+5,to)},5,this)}};var easeIn=function(t){return t*t*t},easeOut=function(t){return--t*t*t+1},easeInOut=function(t){return t<.5?2*t*t:(4-2*t)*t-1},linear=function(t){return t},getDistanceToBody=function(element,offsetTop){return void 0===offsetTop&&(offsetTop=-offset),null!=element.offsetParent&&(offsetTop+=element.offsetTop,offsetTop=getDistanceToBody(element.offsetParent,offsetTop)),offsetTop};this.highlightActiveLink=function(links,moveEvent){for(var sections={},i=0;i<links.length;i++){var id=decodeURI(links[i].hash.replace("#",""));this.movable(id)&&(void 0===sections[id]&&(sections[id]=[]),sections[id].push(links[i]),links[i].dispatchEvent(moveEvent))}var scroller=this;window.addEventListener("scroll",function(event){scroller.setActiveLink(sections)})},this.setActiveLink=function(linkElements){var windowHeight=.25*window.innerHeight;for(var id in linkElements){var sectionElement=document.getElementById(id),sectionElementHeight=sectionElement.getBoundingClientRect().height,sectionElementTop=getDistanceToBody(sectionElement);if(this.getPosition()>=sectionElementTop-windowHeight&&this.getPosition()<=sectionElementTop+sectionElementHeight-windowHeight)for(var i=0;i<linkElements[id].length;i++)linkElements[id][i].classList.add("active"),"#top"!==linkElements[id][i].hash&&(window.location.hash=linkElements[id][i].hash);else for(var i=0;i<linkElements[id].length;i++)linkElements[id][i].classList.remove("active")}};var checkTypeOf=function(element,type){if(typeof element===type)return element;throw"Scroller Error: The expected value must be type of "+type}}